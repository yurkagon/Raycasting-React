(this["webpackJsonpraycasting-react"]=this["webpackJsonpraycasting-react"]||[]).push([[0],{183:function(t,i,e){},185:function(t,i,e){},186:function(t,i,e){},187:function(t,i,e){},188:function(t,i,e){},189:function(t,i,e){},190:function(t,i,e){},191:function(t,i,e){"use strict";e.r(i);var n=e(1),a=e.n(n),o=e(71),s=e.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,192)).then((function(i){var e=i.getCLS,n=i.getFID,a=i.getFCP,o=i.getLCP,s=i.getTTFB;e(t),n(t),a(t),o(t),s(t)}))},r=e(4),l=e(75),h=e(2),u=e(3),d=e(76),g=e(11),b=e(13),v=e(12),y=e(47),f=function(){function t(i){Object(h.a)(this,t),this.started=!1,this.position=void 0,this.position=i,j.getInstance().subscribe(this)}return Object(u.a)(t,[{key:"start",value:function(){this.started=!0}},{key:"isStarted",value:function(){return this.started}},{key:"destroy",value:function(){j.getInstance().unsubscribe(this)}}]),t}(),p=function(){function t(){Object(h.a)(this,t),this.subscribers=[],this.previousCall=void 0,this.deltaTimeValue=0}return Object(u.a)(t,[{key:"init",value:function(){var t=this;setInterval((function(){return t.update()}),10)}},{key:"subscribe",value:function(t){this.subscribers=[].concat(Object(y.a)(this.subscribers),[t])}},{key:"unsubscribe",value:function(t){var i=this.subscribers.findIndex((function(i){return t===i}));this.subscribers.splice(i,1),this.subscribers=Object(y.a)(this.subscribers)}},{key:"deltaTime",get:function(){return this.deltaTimeValue}},{key:"update",value:function(){this.subscribers.forEach((function(t){t instanceof f?(t.isStarted()||t.start(),t.update()):t()})),this.trackDeltaTime()}},{key:"trackDeltaTime",value:function(){var t=Date.now();this.previousCall&&(this.deltaTimeValue=(t-this.previousCall)/1e3),this.previousCall=t}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();p.instance=void 0;var j=p,m=e(6),A=e(27),M=e(72),O=e.n(M),w=e(73),I=e.n(w),x=e(74),S=e.n(x),z=e.p+"static/media/s.2598404c.jpg",k=e.p+"static/media/w.c183bd8a.jpg",D=e.p+"static/media/w2.3d66fb1a.jpg",C={s:z,w:k,g:e.p+"static/media/g.708ac57b.jpg",g2:e.p+"static/media/g2.58dc188c.jpg",g3:e.p+"static/media/g3.30f68b00.jpg",w2:D,b:e.p+"static/media/b.c4ba0bee.jpg",b2:e.p+"static/media/b2.91a79e2e.jpg",b3:e.p+"static/media/b3.aee621d9.jpg"},R=function(){function t(i){Object(h.a)(this,t),this.texture=void 0,this.sidesLight={top:0,left:0,bottom:0,right:0},this.texture=C[i.char]}return Object(u.a)(t,[{key:"setSideLight",value:function(t,i){this.sidesLight[t]=i}},{key:"addSideLight",value:function(t,i){this.sidesLight[t]+=i}}]),t}(),L=function(){function t(){Object(h.a)(this,t),this.data=null,this.wallData=null,this.pointLightMap=null,this.lightMap=null,this.tileSize=32,this.lightScattering=.2}return Object(u.a)(t,[{key:"setData",value:function(t){this.data=t.grid,this.pointLightMap=t.pointLightMap,this.wallData=this.data.map((function(t){return t.map((function(t){return" "!==t?new R({char:t}):null}))})),this.lightMap=S()(this.pointLightMap),window.wallData=this.wallData,this.calculateLightMap(),this.calculateWallLights()}},{key:"handleCollision",value:function(t){var i,e,n,a,o=this.convertPositionToGridPosition(t),s=Math.floor(o.x),c=Math.floor(o.y),r=null===(i=this.data)||void 0===i||null===(e=i[c])||void 0===e?void 0:e[s];if(!(" "!==r))return null;var l={x:o.x%1,y:o.y%1},h=l.y,u=l.x,d=[{side:"top",value:h},{side:"bottom",value:1-h},{side:"left",value:u},{side:"right",value:1-u}],g=O()(d,"value").side;return{point:t,gridPosition:o,floatPart:l,cell:r,wall:null===(n=this.wallData)||void 0===n||null===(a=n[c])||void 0===a?void 0:a[s],collisionSide:g}}},{key:"getBrightness",value:function(t){var i,e,n=this.convertPositionToGridPosition(t),a=Math.floor(n.x),o=Math.floor(n.y);return(null===(i=this.lightMap)||void 0===i||null===(e=i[o])||void 0===e?void 0:e[a])||0}},{key:"convertPositionToGridPosition",value:function(t){return{x:t.x/this.tileSize,y:t.y/this.tileSize}}},{key:"calculateLightMap",value:function(){var t=this;this.pointLightMap.forEach((function(i,e){return i.forEach((function(i,n){i&&t.calculateLightFromPoint({x:n,y:e},i)}))}))}},{key:"calculateLightFromPoint",value:function(t,i){var e=this;if(!(i<=0)){var n=function(n){for(var a=1;;){var o,s,c={y:t.y+a*n.y,x:t.x+a*n.x};if(null!==(null===(o=e.wallData)||void 0===o||null===(s=o[c.y])||void 0===s?void 0:s[c.x]))break;var r=i-e.lightScattering*(a-1);if(r<=0)break;e.lightMap[c.y][c.x]<r&&(e.lightMap[c.y][c.x]=r),e.calculateLightFromPoint(c,r-e.lightScattering),a++}};n({y:-1,x:0}),n({y:1,x:0}),n({y:0,x:1}),n({y:0,x:-1})}}},{key:"calculateWallLights",value:function(){var t=this;this.lightMap.forEach((function(i,e){return i.map((function(i,n){var a,o,s,c,r,l,h,u;if(i){var d=null===(a=t.wallData)||void 0===a||null===(o=a[e-1])||void 0===o?void 0:o[n];d&&d.addSideLight("top",i);var g=null===(s=t.wallData)||void 0===s||null===(c=s[e+1])||void 0===c?void 0:c[n];g&&g.addSideLight("bottom",i);var b=null===(r=t.wallData)||void 0===r||null===(l=r[e])||void 0===l?void 0:l[n-1];b&&b.addSideLight("left",i);var v=null===(h=t.wallData)||void 0===h||null===(u=h[e])||void 0===u?void 0:u[n+1];v&&v.addSideLight("right",i)}}))}))}},{key:"calculateLightFromPointLegacy",value:function(t,i){var e=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3?arguments[3]:void 0;if(!(i<=0)){n.push(t);var o=function(a,o){for(var s=1;;){var c,r,l={y:t.y+s*a.y,x:t.x+s*a.x};if(I()(n,l))break;var h=null===(c=e.wallData)||void 0===c||null===(r=c[l.y])||void 0===r?void 0:r[l.x],u=i-e.lightScattering*(s-1);if(u<=0)break;if(h){h.addSideLight(o,u);break}n.push(l),e.calculateLightFromPoint(l,u-e.lightScattering),s++}};"top"!==a&&o({y:-1,x:0},"top"),"bottom"!==a&&o({y:1,x:0},"bottom"),"right"!==a&&o({y:0,x:1},"right"),"left"!==a&&o({y:0,x:-1},"left")}}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}]),t}();L.instance=void 0;var N=L,Z=function(){function t(i){var e=i.onMouseMove;Object(h.a)(this,t),this.moveState={toForward:!1,toBack:!1,toRight:!1,toLeft:!1,rotateLeft:!1,rotateRight:!1},this.mouseMoveCallback=void 0,this.attachKeyDown(),this.attachKeyUp(),this.mouseMoveCallback=e,this.attachMouseMove()}return Object(u.a)(t,[{key:"attachKeyDown",value:function(){var t=this;document.body.addEventListener("keydown",(function(i){var e=i.code;"KeyW"===e&&(t.moveState.toForward=!0),"KeyS"===e&&(t.moveState.toBack=!0),"KeyA"===e&&(t.moveState.toLeft=!0),"KeyD"===e&&(t.moveState.toRight=!0),"KeyQ"===e&&(t.moveState.rotateLeft=!0),"KeyE"===e&&(t.moveState.rotateRight=!0)}))}},{key:"attachKeyUp",value:function(){var t=this;document.body.addEventListener("keyup",(function(i){var e=i.code;"KeyW"===e&&(t.moveState.toForward=!1),"KeyS"===e&&(t.moveState.toBack=!1),"KeyA"===e&&(t.moveState.toLeft=!1),"KeyD"===e&&(t.moveState.toRight=!1),"KeyQ"===e&&(t.moveState.rotateLeft=!1),"KeyE"===e&&(t.moveState.rotateRight=!1)}))}},{key:"attachMouseMove",value:function(){var t=this;document.addEventListener("mousemove",(function(i){if(ct.allowMouse){var e=i.movementX*ct.mouseSensitivity;t.mouseMoveCallback(e)}}))}}]),t}(),E=function(t){Object(b.a)(e,t);var i=Object(v.a)(e);function e(){var t;if(Object(h.a)(this,e),(t=i.call(this)).position={rotation:-1.884955592153879,x:372.6884332630978,y:128.58201781700896,z:0},t.walkSpeed=44,t.rotationSpeed=1.3,t.radius=8,t.control=void 0,t.bouncingState=!0,t.control=new Z({onMouseMove:t.onMouseMove.bind(Object(A.a)(t))}),ct.isDevelopment)localStorage.getItem("player-position");return t}return Object(u.a)(e,[{key:"update",value:function(){var t=this.control.moveState,i=t.rotateLeft,e=t.rotateRight,n=t.toForward,a=t.toBack,o=t.toRight,s=t.toLeft,c=j.getInstance();if(i||e){var r=e?1:-1;this.setRotation(this.position.rotation+this.rotationSpeed*r*c.deltaTime)}if(n||a){var l=n?1:-1,h={x:Math.cos(this.position.rotation)*this.walkSpeed*l*c.deltaTime,y:Math.sin(this.position.rotation)*this.walkSpeed*l*c.deltaTime};this.moveBy(h)}if(o||s){var u=o?1:-1,d=o?-1:1,g={y:Math.cos(this.position.rotation)*this.walkSpeed*u*c.deltaTime,x:Math.sin(this.position.rotation)*this.walkSpeed*d*c.deltaTime};this.moveBy(g)}}},{key:"checkVisibility",value:function(t){var i=F.getInstance(),e=lt.getAngleBetween(this.position,t.position),n=lt.normalize(this.position.rotation-i.FOV/2),a=lt.normalize(this.position.rotation+i.FOV/2);return lt.isAngleBetweenAngles(e,n,a)?{angleBetweenTarget:e,fovAngleStart:n,fovAngleEnd:a}:null}},{key:"moveBy",value:function(t){var i=N.getInstance(),e=Object(m.a)(Object(m.a)({},this.position),{},{x:this.position.x+t.x,y:this.position.y+t.y});if(!i.handleCollision(e)){this.position=e,e.z+=(this.bouncingState?1:-1)*j.getInstance().deltaTime*.25;var n=.04;e.z<=-n&&(this.bouncingState=!0,e.z=-n),e.z>=n&&(this.bouncingState=!1,e.z=n),ct.isDevelopment&&this.savePosition()}}},{key:"onMouseMove",value:function(t){var i=j.getInstance();this.setRotation(this.position.rotation+t*i.deltaTime)}},{key:"setRotation",value:function(t){this.position=Object(m.a)(Object(m.a)({},this.position),{},{rotation:lt.normalize(t)})}},{key:"savePosition",value:function(){localStorage.setItem("player-position",JSON.stringify(this.position))}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}(f);E.instance=void 0;var T=E,Y=function(){function t(i,e){Object(h.a)(this,t),this.point=void 0,this.angle=void 0,this.isRayFacingDown=void 0,this.isRayFacingUp=void 0,this.isRayFacingRight=void 0,this.isRayFacingLeft=void 0,this.collision=void 0,this.hitDistance=void 0,this.isVerticalCast=!1,this.isHorizontalCast=!1,this.stripHeight=0,this.maxDistance=300,this.grid=N.getInstance(),this.player=T.getInstance(),this.angle=lt.normalize(e),this.point=i,this.isRayFacingDown=this.angle>0&&this.angle<Math.PI,this.isRayFacingUp=!this.isRayFacingDown,this.isRayFacingRight=this.angle<.5*Math.PI||this.angle>1.5*Math.PI,this.isRayFacingLeft=!this.isRayFacingRight}return Object(u.a)(t,[{key:"cast",value:function(){var t=this.castHorizontal(),i=this.castVertical();if(t||i){var e=t?ht(this.player.position,t.point):Number.MAX_VALUE,n=i?ht(this.player.position,i.point):Number.MAX_VALUE;e<n?(this.collision=t,this.hitDistance=e,this.isHorizontalCast=!0):n<=e&&(this.collision=i,this.hitDistance=n,this.isVerticalCast=!0);this.stripHeight=13e3/(Math.cos(T.getInstance().position.rotation-this.angle)*this.hitDistance)}}},{key:"castHorizontal",value:function(){var t,i,e,n;t=Math.floor(this.player.position.y/this.grid.tileSize)*this.grid.tileSize,t+=this.isRayFacingDown?this.grid.tileSize:0,i=this.player.position.x+(t-this.player.position.y)/Math.tan(this.angle),e=this.grid.tileSize,e*=this.isRayFacingUp?-1:1,n=this.grid.tileSize/Math.tan(this.angle),n*=this.isRayFacingLeft&&n>0?-1:1,n*=this.isRayFacingRight&&n<0?-1:1;for(var a=i,o=t;a>=0&&a<=2e3&&o>=0&&o<=2e3;){var s=this.grid.handleCollision({x:a,y:o-(this.isRayFacingUp?1:0)});if(s)return s;a+=n,o+=e}}},{key:"castVertical",value:function(){var t,i,e,n;i=Math.floor(this.player.position.x/this.grid.tileSize)*this.grid.tileSize,i+=this.isRayFacingRight?this.grid.tileSize:0,t=this.player.position.y+(i-this.player.position.x)*Math.tan(this.angle),n=this.grid.tileSize,n*=this.isRayFacingLeft?-1:1,e=this.grid.tileSize*Math.tan(this.angle),e*=this.isRayFacingUp&&e>0?-1:1,e*=this.isRayFacingDown&&e<0?-1:1;for(var a=i,o=t;a>=0&&a<=2e3&&o>=0&&o<=2e3;){var s=this.grid.handleCollision({x:a-(this.isRayFacingLeft?1:0),y:o});if(s)return s;a+=n,o+=e}}},{key:"castLegacy",value:function(){for(var t=0;t<this.maxDistance;){var i={x:Math.cos(this.angle)*t,y:Math.sin(this.angle)*t},e={x:this.point.x+i.x,y:this.point.y+i.y},n=this.grid.handleCollision(e);if(n){this.collision=n,this.hitDistance=ht(this.point,e),this.stripHeight=1e4/(Math.cos(T.getInstance().position.rotation-this.angle)*this.hitDistance);break}t+=.5}}}]),t}(),B={grid:[["w","w2","w2","w","s","s","s","s","s","s","s","s","g","g2","g"],["w"," "," ","w","w"," ","w"," ","w","w2","w"," ","g3"," ","g2"],["w"," "," "," "," "," "," "," "," "," "," "," "," "," ","g"],["w"," "," ","w","w"," ","w"," ","w"," ","w"," ","g3"," ","g3"],["w","w2","w2","w","s","s","s","s","s"," ","s","s","s"," ","s"],["s","b","b","b","b","b","b","b","b2"," ","b2","b","b2"," ","b2"],["s","b2"," "," "," "," "," "," "," "," "," "," "," "," ","b"],["s"," "," ","b3"," ","b3","b3","b3","b3"," ","b3","b3","b3"," ","b"],["s","b2"," "," "," "," "," "," "," "," "," "," "," "," ","b2"],["s","b","b","b","b","b","b","b","b","b","b","b","b","b2","b"],["s","s","s","s","s","s","s","s","s","s","s","s","s","s","s"]],pointLightMap:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,.8,0,0,0,0,0,0,0,.7,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,.8,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,.1,0,.5,0,0,0,0,0,0,0,0,.4,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},G=function(t){Object(b.a)(e,t);var i=Object(v.a)(e);function e(){var t;Object(h.a)(this,e);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=i.call.apply(i,[this].concat(a))).FOV=lt.toRad(60),t.raysCount=160,t.player=T.getInstance(),t.grid=N.getInstance(),t.rays=[],t}return Object(u.a)(e,[{key:"start",value:function(){Object(d.a)(Object(g.a)(e.prototype),"start",this).call(this),this.grid.setData(B)}},{key:"update",value:function(){this.rays=[];for(var t=this.FOV/this.raysCount,i=this.player.position.rotation-this.FOV/2,e=0;e<this.raysCount;e++){var n=i+t*e,a=new Y(this.player.position,n);a.cast(),this.rays.push(a)}}},{key:"setRaysCount",value:function(t){this.raysCount=t}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}(f);G.instance=void 0;var F=G,P=function(){var t=Object(n.useState)(null),i=Object(r.a)(t,2),e=i[0],a=i[1],o=Object(n.useState)(null),s=Object(r.a)(o,2),c=s[0],l=s[1],h=Object(n.useState)(null),u=Object(r.a)(h,2),d=u[0],g=u[1],b=Object(n.useState)(null),v=Object(r.a)(b,2),y=v[0],f=v[1];return Object(n.useEffect)((function(){var t=j.getInstance(),i=F.getInstance(),e=function(){a(i.grid.data),g(i.grid.wallData),f(i.grid.tileSize),l(i.grid.lightMap)};return t.subscribe(e),function(){return t.unsubscribe(e)}}),[]),e?{data:e,tileSize:y,walls:d,lightMap:c}:null},W=function(){var t=Object(n.useState)(null),i=Object(r.a)(t,2),e=(i[0],i[1]),a=T.getInstance();return Object(n.useEffect)((function(){var t=j.getInstance(),i=function(){e(a.position)};return t.subscribe(i),function(){return t.unsubscribe(i)}}),[]),a},V=function(){var t=Object(n.useState)([]),i=Object(r.a)(t,2),e=i[0],a=i[1];return Object(n.useEffect)((function(){var t=j.getInstance(),i=F.getInstance(),e=function(){a(i.rays)};return t.subscribe(e),function(){return t.unsubscribe(e)}}),[]),e},U=function(t){return Math.floor(1e3-t)},Q=(e(183),e(0)),H=function(){var t=V(),i=F.getInstance(),e=dt(),n=e.width/i.raysCount;return Object(Q.jsx)("div",{className:"div-render-strategy",children:t.map((function(t,i){if(!t.collision)return null;var a="top"===t.collision.collisionSide||"right"===t.collision.collisionSide?170:100,o=gt(a*t.stripHeight/e.height,a),s="rgb(".concat(o,", ").concat(o,", ").concat(o,")");return Object(Q.jsx)("button",{className:"strip",style:{width:n,height:t.stripHeight,left:n*i,top:(e.height-t.stripHeight)/2,backgroundColor:s}},i)}))})},J=e(28),X=e.n(J),K=function(t){Object(b.a)(e,t);var i=Object(v.a)(e);function e(t){var n;return Object(h.a)(this,e),(n=i.call(this,t.position)).name=void 0,n.texture=void 0,n.widthCoefficient=void 0,n.originalSize=void 0,n.name=t.name,n.texture=t.texture,n.originalSize=t.originalSize,n.widthCoefficient=t.originalSize.width/t.originalSize.height,n}return Object(u.a)(e,[{key:"update",value:function(){}}]),e}(f),q={guard:{texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAACSCAMAAACNHD8YAAAAt1BMVEUAAACoqKiMjIx8fHxUVFQ4ODhkZGRwcHBISEgsLCzAwMDQ0NAgICBIOBhsSCSIWDAAAACoaEAABPz8sIC8eEh0TCjwlFz8vJzQgFCcYDi0cETojFigZDz8pHD8/PzciFSQXDT8nGCAUCxAMBjIfExUPBw4LBQoIAxcQCDc3Ny0tLSYmJj8eADMYACcTAD8xKT8uJAAAKgAAEwAAHwAAHAAALwAAIgAAEAAANQAAKQAAGQAAFj///98T585AAAAPXRSTlMA//////////////////////////////////////////////////////////////////////////////////f/fQAAAAlwSFlzAAALEwAACxMBAJqcGAAABSBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA4LTA2VDEzOjMyOjIzKzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wOC0wNlQyMTo0Njo1OCswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wOC0wNlQyMTo0Njo1OCswMzowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjIiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0YzJkMjFlYy1iOTkwLTQ2MDktOTllNi05YzQ3YzJmYWEwNGYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NGMyZDIxZWMtYjk5MC00NjA5LTk5ZTYtOWM0N2MyZmFhMDRmIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NGMyZDIxZWMtYjk5MC00NjA5LTk5ZTYtOWM0N2MyZmFhMDRmIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo0YzJkMjFlYy1iOTkwLTQ2MDktOTllNi05YzQ3YzJmYWEwNGYiIHN0RXZ0OndoZW49IjIwMjEtMDgtMDZUMTM6MzI6MjMrMDM6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoA+DiUAAAPoSURBVGiB7dp9bxtFEMDh5+w7vzR24jRJVUoqlVJcRPn+3wSpjShCoqINtGlenNiOzzZ/nMZcSNwXCSR6l5EV3V1253e6ndmdmd3EfyzJ/wSQxN/Vb3YLuNYmI2FOGk/Gt4CQBgkpmMfD7BZQUlR8/SVjErLAfBKjBoAm3ZIDYxk/jGoPaJLRuTrNLQKQfwqj6oABeWkM5sxpBWB8CwA9EjaY0QRzMs5Z/it+8OUD0A/MWdwWqs8+oW9NAAO6NJiADqc0Ob4FhPZCFmzG9co6P86oLuABTQ65wyaHdFmwzQljUrIS/teaAR6SknPIkkaoW8mMnB0W8WTK+9oAHjKlER/9NfscMeFBBKlH3ImoApuM1jEqB1hpT2jR4BUJ+xGMHpdMs5AmI5rMeVN1wEr7lG2aXAYD+2BELxaGC1psccIW4xsZFQKUtadsh4oFi7DCHTZYMKEDUuackdOmycU/jLVCgPsknLMbVYMD9miXMpkp2GEcb9AMzJRJGOsFp5UD3KMNxtzlIP77Pe/IYt6fkDNljxmbLKMQM+UkcqErw1AtwIht0hKgYIzIGdMNH15hOmQsecN9ct7TLg9DVQD7cTEjoV9i9NliwTl9RnQCgzkPeMHTUgo0ryLgERdsRbc/Iy4fhBsXPvwkagoH4e1N0mjcJ+EuIy4rB8B3nJMzp0OfI9Aj5TdwCbLQLi5WgDQmx7fRoEqAPTKm9HlLziNOyUnpcsJmRKXFHNfghK+Z8ZKnzFjQ4JcqAgpG0e2YKc/IueQiovlV4F4sD42oeArA72ArYrXqAQoGxsy45MfYkJuExqMgFbctjtjjJTs0Iz88qy5gJT0egyUX4bEJb64CGpwGYMhZLJ9/S3UBZcY5GTPSKLtcB/zBBj6cQlUOgCENZlFqWaxplvBinYqqA3bJIuXr0mJRKrKgBZZ1BezSoM2UGR1ytnlPK04PoFdjwD0EoBEpzQFDzmNTvGBs1BJQHoBViarID4ucJ4npr9h9qS3gq9hCUCrBDDlkMwCrJbNWgJX2V9xhxG7kfnjMKW0aLGmRfe4YfPmAJ5zG+YAJvTigU3zoIa9p8ZB3tCPov5lRaUDhxr1SDrOSPm3mbNGgWT/AvTXTXCFDLplFTPaR+a6igMJXM7rxfZdXAa/Z4SQOM+2R1gwwuPbk+DMb1AHwTWkBSG8ClIP46w3qAPi2ZJo3Ar6hyfNaAorOadTBX9zUecBTLkuF8roBhix4frX2feN71BZQduPRmo6DsNSfP3zSq3KAols7bHT+MTMtNlQ+xKgWYMCzqIbnZPy0xgQH/MAkXmXde1QSkF9rsM5Me1dv1zrzlw/4CxIn1cAD0mV3AAAAAElFTkSuQmCC",originalSize:{width:96,height:146}},cage:{texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjEtMDgtMTJUMDI6NDM6NDErMDM6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIxLTA4LTEyVDAyOjUzOjEzKzAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIxLTA4LTEyVDAyOjUzOjEzKzAzOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJlMjM5MWUyLTJmM2EtNGJjYy05MmE4LTE4ZTY0YmQ0ODQxMSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjNjMTRkYWVjLTEzMzQtYTM0NS1hOGIxLWQ0OTkzNGE2NWM3ZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmI1ZDQ0YWE3LTFmYmItNDY1NS05YTdiLTdmNmIyMTdkMmY4NyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YjVkNDRhYTctMWZiYi00NjU1LTlhN2ItN2Y2YjIxN2QyZjg3IiBzdEV2dDp3aGVuPSIyMDIxLTA4LTEyVDAyOjQzOjQxKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MmUyMzkxZTItMmYzYS00YmNjLTkyYTgtMThlNjRiZDQ4NDExIiBzdEV2dDp3aGVuPSIyMDIxLTA4LTEyVDAyOjUzOjEzKzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5i0fiJAAAKPUlEQVR4AeXBWYxd913A8e/vf5Z77ja7Z8YzYzu2a7sUp3ZMiKM6kSFpSUIdEtMG0hQqCsoLkdoKUJEICIQQCJFQiVZCrCovJEASJRAaEJCg1JaNYtd1HBvbE8+Ml9nnznaXc8/2/5E0ghdez/XL/XxEVcnVX36a/8fxC9pYnMnqC6MtqcZpZlurSzPyzvVELkZbdM6O6Ea4UW2l6iyth5dbUXLIiISqSmqVNFNE+IFrN+rkySVvfoWPCGBBUyj60fuT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",originalSize:{width:64,height:64},position:{z:3.5}}},_=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,null,[{key:"create",value:function(t,i){var e,n=q[t],a=Object(m.a)(Object(m.a)({},i),{},{z:(null===i||void 0===i?void 0:i.z)||(null===(e=n.position)||void 0===e?void 0:e.z)||0}),o=new K(Object(m.a)(Object(m.a)({},n),{},{position:a,name:t}));return this.sprites.push(o),o}},{key:"removeAll",value:function(){this.sprites.forEach((function(t){return t.destroy()})),this.sprites=[]}}]),t}();_.sprites=[];var $=_,tt=(e(185),function(){P();var t=F.getInstance(),i=W(),e=dt();return i.position?Object(Q.jsx)(n.Fragment,{children:$.sprites.map((function(n,a){var o=i.checkVisibility(n);if(!o)return null;var s=o.angleBetweenTarget,c=o.fovAngleStart,r=ht(n.position,i.position),l=1e3/(Math.cos(i.position.rotation-s)*r),h=10*l,u=h*n.widthCoefficient,d=t.grid.getBrightness(n.position);return Object(Q.jsx)("div",{className:X()("sprite",n.name),style:{width:u,height:h,top:(e.height-l)/2-2*l-n.position.z*l+h*t.player.position.z,left:e.width*lt.normalize(s-c)/t.FOV,zIndex:U(r)},children:Object(Q.jsx)("img",{src:n.texture,style:{width:u,height:h,filter:"brightness(".concat(d,")"),left:-u/2}})},a)}))}):null}),it=(e(186),function(t){var i=t.skyboxEnabled,e=V(),a=F.getInstance(),o=dt(),s=o.width/a.raysCount;return Object(n.useEffect)((function(){return $.create("guard",{x:45,y:50}),$.create("guard",{x:45,y:60}),$.create("guard",{x:55,y:60}),$.create("guard",{x:65,y:50}),$.create("cage",{x:430,y:45}),$.create("cage",{x:430,y:65}),function(){return $.removeAll()}}),[]),Object(Q.jsxs)("div",{className:X()("div-render-strategy-textured",i?"skybox":"gradient"),style:i?{backgroundPositionX:-a.player.position.rotation*o.width}:void 0,children:[e.map((function(t,i){if(!t.collision)return null;var e=("left"===t.collision.collisionSide||"right"===t.collision.collisionSide?t.collision.floatPart.y:t.collision.floatPart.x)*t.stripHeight*2,n=bt(t.collision.wall.sidesLight[t.collision.collisionSide],.1,.8);return Object(Q.jsx)("div",{className:"strip",style:{width:s,height:t.stripHeight,left:s*i,top:(o.height-t.stripHeight)/2+t.stripHeight*a.player.position.z,zIndex:U(t.hitDistance)},children:Object(Q.jsx)("div",{className:"texture",style:{backgroundImage:"url(".concat(t.collision.wall.texture,")"),height:t.stripHeight,width:t.stripHeight,backgroundSize:"cover",backgroundPositionX:-e,opacity:n}})},i)})),Object(Q.jsx)(tt,{})]})}),et=e(29),nt=(e(187),function(){var t=V(),i=F.getInstance(),e=dt();if(Object(n.useEffect)((function(){var t=i.raysCount;return i.setRaysCount(ct.consoleRaysCount),function(){return i.setRaysCount(t)}}),[]),Object(n.useEffect)((function(){i.setRaysCount(Math.floor(e.width*ct.viewportWidthToCharsScaleCoefficient))}),[e.width]),!t.length)return null;var a=Math.floor(e.height*ct.viewportHeightToCharsScaleCoefficient),o=t.map((function(t){for(var i=Math.round(t.stripHeight/480*a),e=i>a?a:i,n=Array.from({length:e}).fill(ut(e,a)),o=a-e,s=Math.ceil(o/2),c=o-s,r=0;r<s;r++)n.push(" ");for(var l=0;l<c;l++)n.unshift("_");return n})),s=Object(et.rotate)(o,270).map((function(t){return t.join("")})).join("\n");return Object(Q.jsx)("div",{className:"text-render-strategy",children:Object(Q.jsx)("textarea",{value:s,rows:a,readOnly:!0})})}),at=e.p+"static/media/devtools.39991061.jpeg",ot=(e(188),function(){var t=Object(n.useState)(null),i=Object(r.a)(t,2),e=i[0],a=i[1],o=V(),s=F.getInstance(),c=dt();Object(n.useEffect)((function(){var t=s.raysCount;return s.setRaysCount(ct.consoleRaysCount),function(){return s.setRaysCount(t)}}),[]);var l=Math.floor(ct.consoleHeight);return Object(n.useEffect)((function(){if(!o.length)return null;var t=o.map((function(t){for(var i=Math.round(t.stripHeight/480*l),e=i>l?l:i,n=Array.from({length:e}).fill(ut(e,l)),a=l-e,o=Math.ceil(a/2),s=a-o,c=0;c<o;c++)n.push(" ");for(var r=0;r<s;r++)n.unshift("_");return n})),i=Object(et.rotate)(t,270).map((function(t){return t.join("")})).join("\n");a(i)}),[o]),Object(n.useEffect)((function(){e&&console.log(e)}),[e]),Object(n.useEffect)((function(){return function(){return console.clear()}}),[]),Object(Q.jsx)("div",{className:"console-render-strategy",children:Object(Q.jsxs)("div",{className:"description",children:[Object(Q.jsx)("h3",{children:"Open browser console"}),Object(Q.jsx)("img",{src:at,width:c.width})]})})}),st=function t(){Object(h.a)(this,t)};st.isProduction=!0,st.isDevelopment=!1,st.allowMouse=!1,st.viewPortSizeMultiplier=.9,st.miniMapSizeMultiplier=.5,st.textRenderCharSpectre=",,:;I&&00%$@@#",st.viewportWidthToCharsScaleCoefficient=.33,st.viewportHeightToCharsScaleCoefficient=.166,st.consoleRaysCount=100,st.consoleHeight=40,st.mouseSensitivity=.1,st.renderingStrategies=[{name:"HTML <div> Textured",component:it,raysCountChangeAvailable:!0,skybox:{default:!1}},{name:"HTML <div> Shaded",component:H,raysCountChangeAvailable:!0},{name:"HTML <textarea> (Only chrome)",component:nt},{name:"Console in your Chrome (only) browser :D",component:ot}];var ct=st,rt=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,null,[{key:"normalize",value:function(t){return(t%=2*Math.PI)<0&&(t=2*Math.PI+t),t}},{key:"isAngleBetweenAngles",value:function(t,i,e){var n=e-i<0?e-i+2*Math.PI:e-i;return(t-i<0?t-i+2*Math.PI:t-i)<n}},{key:"getAngleBetween",value:function(t,i){var e=t.x-i.x,n=i.y-t.y,a=Math.atan2(n,e);return this.normalize(Math.PI-a)}},{key:"log",value:function(t){console.log(this.toDeg(t))}}]),t}();rt.toRad=function(t){return t*Math.PI/180},rt.toDeg=function(t){return 180*t/Math.PI};var lt=rt,ht=function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},ut=function(t,i){var e=",,:;I&&00%$@@#",n=Math.round(t/i*e.length);n<0&&(n=0),n>=e.length&&(n=e.length-1);return e[n]},dt=function(){var t=Object(l.a)();return{width:Math.round(t.width*ct.viewPortSizeMultiplier),height:Math.round(t.height*ct.viewPortSizeMultiplier)}},gt=function(t,i){return t>i?i:t},bt=function(t,i,e){return gt(function(t,i){return t<i?i:t}(t,i),e)},vt=function(){var t=W();if(!t.position)return null;var i=2*t.radius;return Object(Q.jsx)("div",{className:"player-marker",style:{top:t.position.y/2,left:t.position.x/2},children:Object(Q.jsx)("div",{className:"marker-body",style:{height:i,width:i,top:-t.radius,left:-t.radius,transform:"rotate(".concat(t.position.rotation,"rad)")}})})},yt=function(t){var i=t.from,e=t.to;e.x<i.x&&(i=t.to,e=t.from);var n=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2)),a=Math.atan((e.y-i.y)/(e.x-i.x));return Object(Q.jsx)("div",{style:{position:"absolute",transform:"translate(".concat(i.x-.5*n*(1-Math.cos(a)),"px, ").concat(i.y+.5*n*Math.sin(a),"px) rotate(").concat(a,"rad)"),width:"".concat(n,"px"),height:"".concat(0,"px"),borderBottom:"2px solid yellow"}})},ft=function(){var t=V(),i=W();return i.position?Object(Q.jsx)(n.Fragment,{children:t.map((function(t,e){return t.collision?e%20!==0?null:Object(Q.jsx)(yt,{from:{x:i.position.x/2,y:i.position.y/2},to:{x:t.collision.point.x/2,y:t.collision.point.y/2}},e):null}))}):null},pt=(e(189),function(){var t,i=P();if(!i)return null;var e=i.tileSize/2,a=i.data.length,o=i.data[0].length*e,s=a*e;return Object(Q.jsx)("div",{className:"ui-map",children:Object(Q.jsxs)("div",{className:"cell-wrapper",style:{width:o,height:s},children:[Object(Q.jsx)(ft,{}),null===(t=i.walls)||void 0===t?void 0:t.map((function(t,a){return Object(Q.jsxs)(n.Fragment,{children:[t.map((function(t,n){var o,s,c=255*(null===(o=i.lightMap)||void 0===o||null===(s=o[a])||void 0===s?void 0:s[n]),r=t?"url(".concat(t.texture,")"):"rgb(".concat(c,",").concat(c,",").concat(c,")");return Object(Q.jsx)("div",{className:"cell",style:{top:a*e,left:n*e,width:e,height:e,background:r,backgroundSize:"cover"}},n)})),Object(Q.jsx)(vt,{})]},a)}))]})})}),jt=function(){var t=W();return Object(Q.jsxs)("div",{children:[Object(Q.jsxs)("div",{children:["x: ",Math.floor(null===t||void 0===t?void 0:t.position.x)]}),Object(Q.jsxs)("div",{children:["y: ",Math.floor(null===t||void 0===t?void 0:t.position.y)]}),Object(Q.jsxs)("div",{children:["angle: ",Math.floor(lt.toDeg(null===t||void 0===t?void 0:t.position.rotation))]})]})},mt=function(){var t=F.getInstance(),i=Object(n.useState)(t.FOV),e=Object(r.a)(i,2),a=e[0],o=e[1],s=Object(n.useState)(t.raysCount),c=Object(r.a)(s,2),l=c[0],h=c[1],u=Object(n.useState)(ct.renderingStrategies[0]),d=Object(r.a)(u,2),g=d[0],b=d[1],v=Object(n.useState)(ct.allowMouse),y=Object(r.a)(v,2),f=y[0],p=y[1],m=Object(n.useState)(!0),A=Object(r.a)(m,2),M=A[0],O=A[1],w=Object(n.useState)(ct.renderingStrategies[0].skybox.default),I=Object(r.a)(w,2),x=I[0],S=I[1];Object(n.useEffect)((function(){j.getInstance().init()}),[]),Object(n.useEffect)((function(){t.FOV=a}),[a]),Object(n.useEffect)((function(){ct.allowMouse=f}),[f]),Object(n.useEffect)((function(){t.raysCount=l}),[l]),Object(n.useEffect)((function(){h(t.raysCount)}),[g,t]);var z=dt(),k=z.height,D=z.width;return Object(Q.jsxs)("div",{className:"App",children:[Object(Q.jsxs)("div",{className:"game-view-port",style:{width:D,height:k},children:[Object(Q.jsx)(g.component,{skyboxEnabled:x}),M&&Object(Q.jsx)(pt,{})]}),Object(Q.jsxs)("div",{className:"settings",children:[Object(Q.jsxs)("div",{className:"settings-block",children:[Object(Q.jsxs)("div",{children:["Rendering strategy:"," ",Object(Q.jsx)("select",{onChange:function(t){var i=ct.renderingStrategies.find((function(i){return i.name===t.target.value}));b(i)},value:g.name,autoFocus:!1,children:ct.renderingStrategies.map((function(t){return Object(Q.jsx)("option",{value:t.name,children:t.name},t.name)}))})]}),Object(Q.jsxs)("div",{children:["FOV:","  ",Object(Q.jsx)("input",{type:"range",min:"20",max:"360",value:lt.toDeg(a),step:"10",onChange:function(t){return o(lt.toRad(Number(t.target.value)))}}),"Value: ",Math.round(lt.toDeg(a)),"\xb0 (default: 60\xb0)"]}),g.raysCountChangeAvailable&&Object(Q.jsxs)("div",{children:["RAYS:",Object(Q.jsx)("input",{type:"range",min:"10",max:"500",value:l,step:"10",onChange:function(t){return h(Number(t.target.value))}}),"Value: ",l," (default: 160)"]})]}),Object(Q.jsxs)("div",{className:"settings-block",children:[Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{checked:f,onChange:function(t){return p(t.target.checked)},type:"checkbox",id:"allow-mouse"}),Object(Q.jsx)("label",{htmlFor:"allow-mouse",children:"Allow mouse"})]}),Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{checked:M,onChange:function(t){return O(t.target.checked)},type:"checkbox",id:"allow-minimap"}),Object(Q.jsx)("label",{htmlFor:"allow-minimap",children:"Allow minimap"})]}),g.skybox&&Object(Q.jsxs)("div",{children:[Object(Q.jsx)("input",{checked:x,onChange:function(t){return S(t.target.checked)},type:"checkbox",id:"allow-skybox"}),Object(Q.jsx)("label",{htmlFor:"allow-skybox",children:"Skybox"})]})]}),Object(Q.jsxs)("div",{className:"settings-block",children:[Object(Q.jsx)("div",{children:"WASD - to move"}),Object(Q.jsx)("div",{children:"Q and E - to rotate"})]}),Object(Q.jsx)("div",{className:"settings-block",children:Object(Q.jsx)(jt,{})})]})]})};e(190);s.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(mt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),c()}},[[191,1,2]]]);
//# sourceMappingURL=main.859113f1.chunk.js.map